<!DOCTYPE html>
<html>
<head>
    <title>Neon Beats Diagnostics</title>
    <style>
        body { 
            font-family: monospace; 
            padding: 20px; 
            background: #1a1a1a; 
            color: #00ff00;
        }
        .pass { color: #00ff00; }
        .fail { color: #ff0000; }
        .info { color: #ffaa00; }
        pre { background: #000; padding: 10px; border-radius: 5px; }
        button { 
            background: #00ff00; 
            color: #000; 
            border: none; 
            padding: 10px 20px; 
            margin: 10px 5px;
            cursor: pointer;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>ðŸŽµ Neon Beats Diagnostics</h1>
    <div id="results"></div>
    
    <h2>Manual Tests:</h2>
    <button onclick="testMainApp()">Open Main App</button>
    <button onclick="runAllTests()">Run All Checks</button>
    
    <pre id="log"></pre>

    <script>
        const log = (msg, type = 'info') => {
            const logEl = document.getElementById('log');
            logEl.innerHTML += `<span class="${type}">[${new Date().toLocaleTimeString()}] ${msg}</span>\n`;
        };

        function testMainApp() {
            window.open('index.html', '_blank');
            log('Opened main app in new tab', 'info');
        }

        async function runAllTests() {
            document.getElementById('log').innerHTML = '';
            log('Starting diagnostics...', 'info');
            
            // Test 1: Check if files exist
            try {
                const scriptCheck = await fetch('script.js');
                log(scriptCheck.ok ? 'âœ“ script.js found' : 'âœ— script.js missing', scriptCheck.ok ? 'pass' : 'fail');
                
                const styleCheck = await fetch('styles.css');
                log(styleCheck.ok ? 'âœ“ styles.css found' : 'âœ— styles.css missing', styleCheck.ok ? 'pass' : 'fail');
                
                const htmlCheck = await fetch('index.html');
                log(htmlCheck.ok ? 'âœ“ index.html found' : 'âœ— index.html missing', htmlCheck.ok ? 'pass' : 'fail');
            } catch (e) {
                log('âœ— Error checking files: ' + e.message, 'fail');
            }
            
            // Test 2: Check image assets
            try {
                const imgCheck = await fetch('assets/images/MidnightCity.jpg');
                log(imgCheck.ok ? 'âœ“ Assets folder accessible' : 'âœ— Assets folder issue', imgCheck.ok ? 'pass' : 'fail');
            } catch (e) {
                log('âœ— Assets error: ' + e.message, 'fail');
            }
            
            // Test 3: JavaScript syntax
            try {
                const scriptContent = await (await fetch('script.js')).text();
                log('âœ“ script.js loaded (' + (scriptContent.length / 1024).toFixed(1) + ' KB)', 'pass');
                
                // Check for critical functions
                if (scriptContent.includes('setupEventListeners')) {
                    log('âœ“ setupEventListeners found', 'pass');
                } else {
                    log('âœ— setupEventListeners MISSING', 'fail');
                }
                
                if (scriptContent.includes('updateCartUI')) {
                    log('âœ“ updateCartUI found', 'pass');
                } else {
                    log('âœ— updateCartUI MISSING', 'fail');
                }
                
                if (scriptContent.includes('loadSong')) {
                    log('âœ“ loadSong found', 'pass');
                } else {
                    log('âœ— loadSong MISSING', 'fail');
                }
            } catch (e) {
                log('âœ— Script check error: ' + e.message, 'fail');
            }
            
            // Test 4: HTML structure
            try {
                const htmlContent = await (await fetch('index.html')).text();
                log('âœ“ index.html loaded (' + (htmlContent.length / 1024).toFixed(1) + ' KB)', 'pass');
                
                if (htmlContent.includes('id="audio-player"')) {
                    log('âœ“ Audio player element found', 'pass');
                } else {
                    log('âœ— Audio player element MISSING', 'fail');
                }
                
                if (htmlContent.includes('id="loading-overlay"')) {
                    log('âœ“ Loading overlay found', 'pass');
                } else {
                    log('âœ— Loading overlay MISSING', 'fail');
                }
                
                if (htmlContent.includes('remixicon')) {
                    log('âœ“ Icon library included', 'pass');
                } else {
                    log('âœ— Icon library MISSING', 'fail');
                }
            } catch (e) {
                log('âœ— HTML check error: ' + e.message, 'fail');
            }
            
            log('\n=== Tests Complete ===', 'info');
            log('Click "Open Main App" to test manually', 'info');
        }
        
        // Auto-run on load
        setTimeout(() => runAllTests(), 500);
    </script>
</body>
</html>
